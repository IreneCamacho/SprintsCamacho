<!DOCTYPE html>
<html lang="eng" dir="ltr">

<!-- BEGIN head -->
<!-- Mirrored from butazzo-pizza.herokuapp.com/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Sep 2018 08:22:33 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>

    <!-- Meta tags -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="description" content="">
    <meta name="author" content="">
    <title> VisitTour </title>

    <!-- Stylesheets -->
    <link href="src/assets/css/bootstrap.min.css" type="text/css" rel="stylesheet" media="all" />
    <link href="src/assets/css/bootstrap-theme.min.css" type="text/css" rel="stylesheet" media="all" />
    <link href="src/assets/css/fonts.css" type="text/css" rel="stylesheet" />
    <link href="src/assets/css/font-awesome.min.css" type="text/css" rel="stylesheet" />
    <link href="src/assets/css/slick.css" type="text/css" rel="stylesheet" />
    <link href="src/assets/css/slick-theme.css" type="text/css" rel="stylesheet" />
    <link href="src/assets/css/aos.css" type="text/css" rel="stylesheet" />
    <link href="src/assets/css/scrolling-nav.css" type="text/css" rel="stylesheet" />
    <link href="src/assets/css/bootstrap-datepicker.css" type="text/css" rel="stylesheet" />
    <link href="src/assets/css/bootstrap-datetimepicker.css" type="text/css" rel="stylesheet" />
    <link href="src/assets/css/touch-sideswipe.css" type="text/css" rel="stylesheet" />
    <link href="src/assets/css/jquery.fancybox.css" type="text/css" rel="stylesheet" />
    <link href="src/assets/css/main.css" type="text/css" rel="stylesheet" />
    <link href="src/assets/css/responsive.css" type="text/css" rel="stylesheet" />

<!-- using googleAPI's to get current position-->

<!--<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>-->

</head>
<!-- END head -->

<!-- BEGIN body -->

<body onload="initialize()" data-spy="scroll" data-target=".navbar" data-offset="50">



  <!-- BEGIN  Loading Section -->
  <div class="loading-overlay">
      <div class="spinner">
          <span></span>
          <span></span>
          <span></span>
          <span></span>
          <span></span>
      </div>
  </div>
  <!-- END Loading Section -->

  <!-- BEGIN body wrapper -->
  <div class="body-wrapper">

      <!-- Begin header-->
      <header id="header">




          <!-- BEGIN navigation -->
          <div class="navigation" style="background: rgba(153, 1, 0, 1);">

              <div class="navbar-container" data-spy="affix" data-offset-top="400">
                  <div class="container">

                    <!--
                      <div class="navbar_top">
                          <div class="top_addr">
                              <span id="location"><i class="fa fa-map-marker" aria-hidden="true"></i></span>
                              <span><i class="fa fa-phone" aria-hidden="true"></i> 123 456 789</span>
                              <span><i class="fa fa-clock-o" aria-hidden="true"></i> 11:00 - 21:00</span>
                              <div class="pull-right search-block">
                                  <i class="fa fa-search" id="search" aria-hidden="true"></i>
                              </div>
                          </div>
                          <div id="navbar_search">
                              <form method="post">
                                  <input type="text" name="q" class="form-control pull-left" value="" placeholder="Search anything">
                                  <button type="submit" class="pull-right close" id="search_close"><i class="fa fa-close"></i></button>
                              </form>
                          </div>
                      </div>
                      <!-- /.navbar_top -->
                      <!-- BEGIN navbar -->
                      <nav class="navbar">
                          <div id="navbar_content">
                              <!-- Brand and toggle get grouped for better mobile display -->
                              <div class="navbar-header">
                                  <a class="navbar-brand" href="#">
                                      <img src="src/assets/img/logo.png" width="179" height="70" alt="logo" />
                                  </a>
                                  <!--
                                  <a href="#cd-nav" class="cd-nav-trigger right_menu_icon">
                                      <span><i class="fa fa-bars" aria-hidden="true"></i></span>
                                  </a>
                                -->
                                </div>


                              <!-- Collect the nav links, forms, and other content for toggling -->
                              <div class="collapse navbar-collapse" id="navbar">
                                  <div class="navbar-right">
                                      <ul class="nav navbar-nav">
                                          <li><a class="page-scroll" href="#header">Home</a></li>
                                          <li><a class="page-scroll" href="#menu">Nearby Restaurants and Shopping Center</a></li>
                                          <li><a class="page-scroll" href="#footer">Map Location</a></li>
                                      </ul>
                                  </div>
                              </div>
                              <!-- /.navbar-collapse -->
                          </div>
                      </nav>
                  </div>
                  <!-- END navbar -->
              </div>
              <!-- /.navbar-container -->
          </div>
          <!-- END navigation -->

      </header>
      <!-- End header -->


<!-- removed the location and added outside the navigation
created restaurants and shopping centers divisions.

-->



<div id="current-location" style="margin-top: 100px;"></div>"

<div class ="item_link_box" id="suggestedRestaurants">
  <h4 onclick="searchRestaurants()">Restaurants</h4>
  <div id="rests-body"></div>
</div>

<div class ="item_link_box" id="suggestedRestaurants">
  <h4 onclick="searchShoppingCenters()">Shopping Centers</h4>
  <div id="rests-body"></div>
</div>




      <!--  Begin Footer  -->
      <footer id="footer">

          <!--    Contact    -->

          <!--    Google map, Social links    -->
          <div class="section" id="contact">
              <div id="googleMap"></div>
              <div class="footer_pos">
                  <div class="copyright">
                      <div class="container">
                          <div class="row">
                              <div class="col-md-8">
                                  <div class="copy_text">
                                      Copyright Â© 2018VisitTour <span>|</span> All Rights Reserved
                                  </div>
                              </div>
                              <div class="col-md-4">
                                  <div class="social-links">
                                      <ul class="list-inline">
                                          <li class="list-inline-item">
                                              <a href="javascript:;" title="">
                                                  <i class="fa fa-facebook" aria-hidden="true"></i>
                                              </a>
                                          </li>
                                          <li class="list-inline-item">
                                              <a href="javascript:;" title="">
                                                  <i class="fa fa-instagram" aria-hidden="true"></i>
                                              </a>
                                          </li>
                                          <li class="list-inline-item">
                                              <a href="javascript:;" title="">
                                                  <i class="fa fa-pinterest-p" aria-hidden="true"></i>
                                              </a>
                                          </li>
                                          <li class="list-inline-item">
                                              <a href="javascript:;" title="">
                                                  <i class="fa fa-linkedin" aria-hidden="true"></i>
                                              </a>
                                          </li>
                                      </ul>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </footer>

      <!-- End Footer -->


      <div id="restaurantModal" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
          <div class="modal-dialog modal-lg" role="document">
              <div id="rest-modal-content" class="modal-content"></div>
          </div>
      </div>

      </div>
      <!-- END body-wrapper -->


      <!-- START mobile right burger menu -->

      <nav class="cd-nav-container right_menu" id="cd-nav id="navbar_search"">
          <div class="header__open_menu">
              <a href="index-2.html" class="rmenu_logo" title="yagmurmebel.az">
                  <img src="src/assets/img/logo.png" alt="logo" />
              </a>
          </div>
          <div class="right_menu_search">
              <form method="post">
                  <input type="text" name="q" class="form-control search_input" value="" placeholder="Search anything">
                  <button type="submit" class="search_icon"><i class="fa fa-search"></i></button>
              </form>
          </div>
          <ul class="rmenu_list">
              <li><a class="page-scroll" href="#header">Home</a></li>
              <li><a class="page-scroll" href="#about_us">Suggested Restaurants</a></li>
              <li><a class="page-scroll" href="#footer">Map Location and Contacts</a></li>
          </ul>
          <div class="right_menu_addr top_addr">
              <span><i class="fa fa-map-marker" aria-hidden="true"></i> Your country, your city, 12345</span>
          </div>
      </nav>

      <div class="cd-overlay"></div>
      <!-- /.cd-overlay -->


      <!-- END mobile right burger menu -->

      <!-- JavaScript -->
      <script src="src/assets/js/jquery-2.1.1.min.js"></script>
      <script src="src/assets/js/bootstrap.min.js"></script>
      <script src="src/assets/js/jquery.mousewheel.min.js"></script>
      <script src="src/assets/js/jquery.easing.min.js"></script>
      <script src="src/assets/js/scrolling-nav.js"></script>
      <script src="src/assets/js/aos.js"></script>
      <script src="src/assets/js/slick.min.js"></script>
      <script src="src/assets/js/jquery.touchSwipe.min.js"></script>
      <script src="src/assets/js/moment.js"></script>
      <script src="src/assets/js/bootstrap-datepicker.js"></script>
      <script src="src/assets/js/bootstrap-datetimepicker.js"></script>
      <script src="src/assets/js/jquery.fancybox.js"></script>
      <script src="src/assets/js/loadMoreResults.js"></script>
      <script src="src/assets/js/main.js"></script>
      <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBcg5Y2D1fpGI12T8wcbtPIsyGdw-_NV1Y&amp;callback=myMap&amp;libraries=places"></script>

      <script type="text/javascript">
          var geocoder;

          if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(successFunction, errorFunction);
        }
        //Get the latitude and the longitude;
        var lat
        var lng
        function successFunction(position) {
          lat = position.coords.latitude;
          lng = position.coords.longitude;
          codeLatLng(lat, lng)

        }

        function errorFunction(){
            alert("Geocoder failed");
        }


          function initialize() {
            geocoder = new google.maps.Geocoder();


          }

          function codeLatLng(lat, lng) {

            var latlng = new google.maps.LatLng(lat, lng);
            geocoder.geocode({'latLng': latlng}, function(results, status) {
              if (status == google.maps.GeocoderStatus.OK) {

                if (results[1]) {
                 //formatted address
                 document.getElementById('current-location').innerHTML = results[0].formatted_address;
                //find country name
                     for (var i=0; i<results[0].address_components.length; i++) {
                    for (var b=0;b<results[0].address_components[i].types.length;b++) {

                    //there are different types that might hold a city admin_area_lvl_1 usually does in come cases looking for sublocality type will be more appropriate
                        if (results[0].address_components[i].types[b] == "administrative_area_level_1") {
                            //this is the object you are looking for
                            city= results[0].address_components[i];
                            break;
                        }
                    }
                }
                //city data
                //alert(city.short_name + " " + city.long_name)


                } else {
                  alert("No results found");
                }
              } else {
                alert("Geocoder failed due to: " + status);
              }
            });
          }

          var map
          var infowindow;
          var currentLocation
          var elId= 'rests-body'


            function nearByLocations(lat, lng, type)
        {
          var location = {lat: lat, lng: lng};
          currentLocation = {lat: lat, lng: lng};

          map = new google.maps.Map(document.getElementById('googleMap'), {
              center: location,
              zoom: 15,
          })

          infowindow = new google.maps.InfoWindow();
          var placeService = new google.maps.places.PlacesService(map)
          var nearBySearch = placeService.nearbySearch({
              location: location,
              radius: 3000,
              type: type,

          }, nearBySearchCallback)
        }

        function nearBySearchCallback(results, status) {
              if (status === google.maps.places.PlacesServiceStatus.OK) {

                  var destinations = []
                  results.forEach(r => {
                      //console.log(r)
                      destinations.push(r.geometry.location)
                  });

                  var distanceResults = null
                  var service = new google.maps.DistanceMatrixService();
                  service.getDistanceMatrix(
                  {
                      origins: [currentLocation],
                      destinations: destinations,
                      travelMode: 'DRIVING',
                      //transitOptions: TransitOptions,
                      //drivingOptions: DrivingOptions,
                      //unitSystem: UnitSystem,
                      //avoidHighways: Boolean,
                      //avoidTolls: Boolean,
                  }, function(result, status){
                      distanceResults = result.rows

                      //console.log('result', distanceResults)

                       var row = document.createElement('div')
                      row.className = 'row'

                      //var row = '<div class="row">'
                      for (var i = 0; i < results.length; i++) {
                          createMarker(results[i]);
                          //console.log(results[i])
                          var rest = results[i]

                          var button = document.createElement('input')
                          button.type = 'button'
                          button.value = 'Show Details'
                          button.className = 'btn btn-xs btn-default'
                          button.rest = rest
                          button.distance = distanceResults[0].elements[i].distance.text
                          button.duration = distanceResults[0].elements[i].duration.text
                          button.addEventListener('click', function(){
                              showRestaurantDetails(event.target.rest, event.target.distance, event.target.duration)
                          })


                          var div = document.createElement('div')
                          div.className = 'col-xs-6 col-md-4'

                          var div2 = document.createElement('div')
                          div2.className = 'rest-thumb'

                          var imageDiv = document.createElement('div')
                          imageDiv.className = 'rest-image'


                          var img = document.createElement('img')
                          img.setAttribute('src', rest.icon)

                          imageDiv.appendChild(img)


                          var name = document.createElement('div')
                          name.className = 'name'
                          name.innerHTML = rest.name

                          var distance = document.createElement('div')
                          distance.className = 'distance'
                          distance.innerHTML = distanceResults[0].elements[i].distance.text + ' in ' + distanceResults[0].elements[i].duration.text

                          div.appendChild(imageDiv)
                          div.appendChild(name)
                          div.appendChild(distance)
                          div.appendChild(button)
                          div.appendChild(div2)


                          row.appendChild(div)
                        }
                        //row += '</div>'
                        document.getElementById(elId).appendChild(row)
                    });

                }
            }

            function createMarker(place) {
                var placeLoc = place.geometry.location;
                var marker = new google.maps.Marker({
                    map: map,
                    position: place.geometry.location
                });

                google.maps.event.addListener(marker, 'click', function() {
                    infowindow.setContent(place.name);
                    infowindow.open(map, this);
                });
            }


            function showRestaurantDetails(data, distance, duration) {
                //console.log(data)

                $('#restaurantModal').modal()

                var modalContent = $('#rest-modal-content')

                var status = 'Closed'
                var statusClass = 'closed'
                if(data.opening_hours == undefined){
                    status = 'Not Defined'
                    statusClass = ''
                }
                if(data.opening_hours != undefined && data.opening_hours.open_now){
                    status = 'Opened'
                    statusClass = 'opened'
                }

                var row = '<div class="name">' + data.name + '</div>'
                row += '<div class="rating"><label>Rating:</label> <span>' + data.rating + '</span></div>'
                row += '<div class="address"><label>Address: </label>' + data.vicinity + '</div>'
                row += '<div class="status"><label>Status: </label> <span class="'+ statusClass +'">' + status +'</span> </div>'
                row += '<div class="distance"><label>Distance from Current Location: </label><span>' + distance + '</span></div>'
                row += '<div class="distance"><label>Time from Current Location: </label> <span>' + duration + '</span></div>'

                modalContent.html(row)
            }

            function searchRestaurants(){
              document.getElementById(elId).innerHTML = ''
              elId = 'rests-body'
              nearByLocations (lat, lng, 'restaurant')
            }

            function searchShoppingCenters(){
              document.getElementById(elId).innerHTML = ''
              elId = 'rests-body'
              nearByLocations (lat, lng, 'shopping_mall')

          }

          </script>

    </body>

    <!-- Mirrored from butazzo-pizza.herokuapp.com/ by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 22 Sep 2018 08:22:51 GMT -->
    </html>
